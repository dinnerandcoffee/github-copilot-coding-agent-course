# 06. Test & Debug  
테스트와 버그 수정 자동화

이 강의에서는 Copilot Coding Agent를  
**‘코드 작성자’에서 ‘품질 담당자’로 확장**한다.

기능 구현만 자동화하면 반쪽짜리다.  
테스트와 디버깅까지 맡겨야 진짜 생산성 향상이 된다.

---

## 이 강의의 목표

이 강의가 끝나면 다음을 할 수 있어야 한다.

- Copilot에게 테스트 코드를 먼저 작성하게 한다
- 실패하는 테스트를 기준으로 버그를 수정시킨다
- “테스트 → 수정 → 재실행” 루프를 만든다

---

## 왜 테스트가 중요한가

Copilot이 만든 코드를 볼 때  
항상 따라오는 질문이 있다.

- 이 코드, 진짜 맞나?
- 엣지 케이스는?
- 나중에 깨지지 않을까?

사람 개발자는 이때 테스트를 쓴다.  
**Copilot도 마찬가지다.**

> 테스트는 요구사항의 코드화다.  
> Copilot에게 기준을 주는 가장 좋은 방법이다.

---

## Step 1. 테스트부터 작성시키기

기능을 고치기 전에  
**테스트를 먼저 작성**하게 한다.

~~~text
이 기능에 대한 테스트 코드를 먼저 작성해줘.

기준:
- 정상 입력
- 잘못된 입력
- 엣지 케이스
~~~

### 관찰 포인트
- 실패 케이스를 포함하는가?
- 테스트 이름이 의도를 드러내는가?

👉 테스트가 실패해도 정상이다.

---

## Step 2. 실패 테스트를 기준으로 수정 요청

테스트 실행 후,  
실패 메시지를 그대로 Copilot에게 전달한다.

~~~text
아래 테스트가 실패하고 있어.
에러 메시지를 기준으로
코드를 수정해줘.

[에러 메시지 붙여넣기]
~~~

이 방식의 장점은 명확하다.

- 말로 설명할 필요가 없다
- 재현 가능한 기준이 생긴다
- 수정 방향이 흔들리지 않는다

---

## Step 3. 자동 루프 만들기

이제 반복 작업을 Copilot에게 맡긴다.

~~~text
다음 과정을 반복해줘.

1. 테스트 실패 원인 분석
2. 코드 수정
3. 모든 테스트 통과 확인
~~~

Copilot은  
이 루프를 매우 잘 수행한다.

---

## Step 4. 일부러 버그를 만들어보자

Copilot의 디버깅 능력을 확인하기 위해  
의도적으로 버그를 심어본다.

- 조건문 제거
- return 값 변경
- 예외 처리 누락

그리고 이렇게 요청한다.

~~~text
최근 변경 이후 테스트가 실패하고 있어.
의도하지 않은 버그를 찾아서 수정해줘.
~~~

---

## Step 5. 테스트 자체를 개선시키기

테스트 코드도 완벽하지 않다.  
Copilot에게 테스트 개선을 맡긴다.

~~~text
현재 테스트 코드의 부족한 점을 지적하고,
테스트 품질을 높이도록 개선해줘.

기준:
- 엣지 케이스 보강
- 중복 제거
- 가독성 개선
~~~

---

## 흔한 실수

- 테스트 없이 바로 수정 요청
- 에러 메시지 요약해서 전달
- 테스트 실패를 무시

이 경우 Copilot은  
**임시 해결책**을 내놓을 가능성이 높다.

---

## 테스트 자동화 체크리스트

- [ ] 테스트를 먼저 작성시켰다
- [ ] 실패 테스트를 그대로 전달했다
- [ ] 테스트 → 수정 루프를 만들었다
- [ ] 테스트 품질까지 점검했다

---

## 정리

Copilot에게 테스트를 맡기면  
Copilot 스스로를 검증하게 만들 수 있다.

> **Copilot으로 Copilot을 관리하라.**

---

## 다음 단계

👉 **07. Custom Instructions – Copilot 제어하기**

이제 Copilot의 행동 규칙을 고정하고,  
“우리 팀용 Copilot”을 만들 차례다.
